<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>mobtaotao</title>
	<style type="text/css">
		* {
			margin: 0;
			padding: 0;
		}
		html,
		body {
			width: 100%;
			height: 100%;
			overflow: hidden;
		}
		canvas {
			/*background-color: #000;*/
			background:url(imgs/01.jpg) no-repeat center center;
		}
	</style>
</head>
<body>
	<canvas id="myCanvas"></canvas>
	<script type="text/javascript">
		var canvas=document.getElementById("myCanvas");
			// 获取当前视口的宽
		var width = document.documentElement.clientWidth;
			// 获取当前时候的高
		var height = document.documentElement.clientHeight;
		canvas.width = width;
		canvas.height = height;
		var ctx=canvas.getContext("2d");
		ctx.fillStyle = "white";


		var x = parseInt(Math.random()*width);
		var y = parseInt(Math.random()*height);
		var r = 2;
		var x_speed=1;
		var y_speed=2;
		function Star(ctx,x,y,r){
			this.ctx=ctx;
			this.x=x;
			this.y=y;
			this.r=r;
			this.x_speed = (parseInt(Math.random() * 3) + 1) * Math.pow(-1, parseInt(Math.random() * 10) + 1) / 5;
			this.y_speed = (parseInt(Math.random() * 3) + 1) * Math.pow(-1, parseInt(Math.random() * 10) + 1) / 5;
		
		}

		Star.prototype.render=function(){
				// 开启路径
				this.ctx.beginPath();
				// 绘制弧
				this.ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2);
				// 闭合路径
				this.ctx.closePath();
				// 填充
				this.ctx.fill();
		}

		Star.prototype.clear=function(){
			this.ctx.clearRect(0, 0, canvas.width, canvas.height);
		}


		Star.prototype.move = function() {
			this.x -= this.x_speed;
			this.y -= this.y_speed;
	    }


		    	// 改变x方向
		Star.prototype.changeX = function() {
			this.x_speed = - this.x_speed;
		}

		// 改变y方向
		Star.prototype.changeY = function() {
			this.y_speed = - this.y_speed;
		}

		function line(x1, y1, x2, y2){
				// 开启路径
			ctx.beginPath();
			// 移动画笔到某个位置
			ctx.moveTo(x1, y1);
			ctx.lineTo(x2, y2);
			// 闭合路径
			ctx.closePath();
			// 描边
			ctx.stroke();
		}




		var star = new Star(ctx, Math.random() * width, Math.random() * height, 1);


		var arr=[];

		for(var i=0;i<100;i++){
			arr.push(new Star(ctx, Math.random() * width, Math.random() * height, 1));
		}








		var timer = setInterval(function(){
			star.clear();
			arr.forEach(function(value,index){
				value.move();
					// 判断
				if (value.x < 0 || value.x > width) {
					// 执行changeX
					value.changeX();
				} 

				if (value.y < 0 || value.y > height) {
					// 执行changeY
					value.changeY();
				}
				value.render();

			})

			arr.forEach(function(value,index) {
				for(var i=index+1;i<=arr.length;i++){
					if(Math.abs(value.x-arr[i].x)<50 && Math.abs(value.y-arr[i].y)<50)
					{
						line(value.x,value.y,arr[i].x,arr[i].y);
					}
				}
			
			});



		},20)






		function hua(x, y, r, star, end){
			ctx.beginPath();
			ctx.arc(x, y, r, star, end);
			ctx.closePath();
			ctx.fill();
		}
		hua(x, y, r, 0, Math.PI * 2);


		// var timer=setInterval(function(){
		// 	ctx.clearRect(0, 0, width, height);
		// 	if(x<0 | x>width)
		// 	{
		// 		x_speed=-1*x_speed;
		// 	}
		// 	if(y<0 | y>height)
		// 	{
		// 		y_speed=-1*y_speed;
		// 	}

		// 	x -= x_speed;
		// 	y -= y_speed;


		// 	hua(x, y, r, 0, Math.PI * 2);
		// },10)




	</script>
</body>
</html>